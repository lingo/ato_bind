!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):"object"==typeof exports?exports.Ato=e():t.Ato=e()}(this,function(){return function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="/dist/",e(0)}([function(t,e,n){"use strict";function r(t,e,n){n=o({attributes:["data-bind","name"],bindable:"input,select,textarea,button",debug:!1,direction:"both",html:!1,privateDataKey:".ato",text:!1},n),"string"==typeof e&&(e=document.querySelector(e)),i(t);var r=a.initPrivateData(t,n),u=a.getBindableSelector(n),s=a.getChildElements(e,u),l=a.filterBindableByKey(s,t,n.attributes);if("both"==n.direction||"dom"==n.direction){var d=function(e){if(!a.isEnum(t,e))return"continue";r.observers[e]=r.observers[e]||new Set;var o=r.observers[e];return e in r.data?(o.add(l.get(e)),"continue"):"function"==typeof e?"continue":(r.data[e]=t[e],delete t[e],o.add(l.get(e)),void Object.defineProperty(t,e,{get:function(){return n.debug&&console.debug("ato.get '"+e+"' => '"+r.data[e]+"'"),r.data[e]},set:function(o){r.data[e]=o,t.trigger("ato.modelChanged",e,o),t.trigger("change",e,o),n.debug&&console.debug("ato.set '"+e+"' to '"+o+"'")},configurable:!0,enumerable:!0}))};for(var c in t){d(c)}t.on("ato.modelChanged",function(e,r,o){o||(o={noTrigger:!1,fromInput:!1});var i=l.get(e);if(i)for(var u=0;u<i.length;u++){var s=i[u];n.debug&&console.debug("ato.event: modelChanged on '"+s+"' -> '"+e+"'",s,e,r,t),o.fromInput!==s&&a.setValue(s,r,e,t,n),t.trigger("update",s,e,r)}})}return("both"==n.direction||"model"==n.direction)&&a.on(e,"input",function(e){var r=e.target||this,o=a.getEltKey(r,n.attributes),i=r.getAttribute(o);return n.debug&&console.debug("ato.event: '"+e.type+"' on '"+r+"' -> '"+i+"'"),t[".ato.set"](i,a.getValue(r,n.text),{fromInput:r}),n.debug&&console.debug("ato: DOM->Model set '"+i+"' = '"+t[i]+"'"),!0}),t}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},a=n(1),i=n(3);t.exports=r},function(t,e){"use strict";t.exports={isEnum:function(t,e){return t.hasOwnProperty(e)},off:function(t,e,n){t.removeEventListener?t.removeEventListener(e,n):t.detachEvent("on"+e,n)},on:function(t,e,n){t.addEventListener?t.addEventListener(e,n):t.attachEvent("on"+e,function(t){return n.call(t)})},selectOption:function(t,e){var n;for(n=0;n<t.options.length;n++)if(t.options[n].hasAttribute("value")&&t.value==e)return void(t.selectedIndex=n);if("string"==typeof e&&Number(e)!=e)for(n=0;n<t.options.length;n++)if(t.options[n].textContent==e)return void(t.selectedIndex=n);t.selectedIndex=e},tagToAttribute:function(t){var e=t.tagName.toLowerCase();return"select"===e?!1:"checkbox"===t.type||"radio"===t.type?"checked":"value"in t?"value":"textContent"},getEltKey:function(t,e){var n=e.filter(function(e){return t.hasAttribute(e)});return n.length?n[0]:!1},getValue:function(t,e){if(e)return t.textContent;var n=this.tagToAttribute(t);if(n===!1&&t.selectedIndex>=0){var r=t[t.selectedIndex];return r.hasAttribute("value")?r.value:r.textContent}return t[n]},setValue:function(t,e,n,r,o){var a=o.html;if("object"==typeof a&&(a=n in a?a[n]:!1),a)try{return t.innerHTML=a(e,t,n,r)}catch(i){return t.innerHTML=e}var u=o.text;if("object"==typeof u&&(u=n in u?u[n]:!1),u)try{return t.textContent=u(e,t,n,r)}catch(i){return t.textContent=e}var s=this.tagToAttribute(t);"checked"===s&&"boolean"!=typeof e?t.value=e:s===!1?this.selectOption(t,e):t[s]=e},getBindableSelector:function(t){"string"==typeof t.bindable&&(t.bindable=t.bindable.split(/[,\s]/g));var e=t.bindable.map(function(e){return t.attributes.map(function(t){return e+"["+t+"]"}).join(",")}).join(",");return e},filterBindableByKey:function(t,e,n){var r=new Map;for(var o in e)if(this.isEnum(e,o))for(var a=0;a<t.length;a++){var i=t[a],u=this.getEltKey(i,n),s=i.getAttribute(u);s===o&&(r.has(s)||r.set(s,[]),r.get(s).push(i))}return r},dataProp:function(t,e,n){return Object.defineProperty(t,e,{value:n,enumerable:!1})},initPrivateData:function(t,e){var n=e.privateDataKey;return n in t||(t[n]={},this.dataProp(t,n,{event:{listeners:null},observers:{},data:{}})),".ato.set"in t?t[n]:(this.dataProp(t,".ato.set",function(r,o,a){var i=t[n];a||(a={noTrigger:!1,fromInput:!1}),i.data[r]=o,t.trigger("ato.modelChanged",r,o,a),t.trigger("change",r,o),e.debug&&console.debug("ato.set '"+r+"' to '"+o+"'")}),t[n])},getChildElements:function(t,e){return t.querySelectorAll(e)}}},,function(t,e,n){"use strict";var r=n(1);t.exports=function(t){r.dataProp(t,"on",function(e,n){var o=r.initPrivateData(t,{privateDataKey:".ato"});o.event.listeners||(o.event.listeners=new Map),o.event.listeners.has(e)||o.event.listeners.set(e,new Set),o.event.listeners.get(e).add(n)}),r.dataProp(t,"off",function(e,n){var o=r.initPrivateData(t,{privateDataKey:".ato"});o.event.listeners||(o.event.listeners=new Map);var a=o.event.listeners.get(e);a&&a["delete"](n)}),r.dataProp(t,"trigger",function(e){var n=r.initPrivateData(t,{privateDataKey:".ato"});n.event.listeners||(n.event.listeners=new Map);var o=n.event.listeners.get(e);if(o){var a=!0,i=!1,u=void 0;try{for(var s,l=o[Symbol.iterator]();!(a=(s=l.next()).done);a=!0){for(var d=s.value,c=arguments.length,f=Array(c>1?c-1:0),v=1;c>v;v++)f[v-1]=arguments[v];d.apply(t,f)}}catch(g){i=!0,u=g}finally{try{!a&&l["return"]&&l["return"]()}finally{if(i)throw u}}}})}}])});
//# sourceMappingURL=ato.js_a2831bc9f8c6d8361122.map